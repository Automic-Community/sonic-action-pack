<?xml version="1.0" encoding="ISO-8859-15" standalone="no"?><uc-export clientvers="11.0.0">
<JOBI name="PCK.AUTOMIC_SONIC.PUB.INCLUDE.SSH_PREPARE_CMD@UNIX">
<HEADER state="1">
<Title>Prepare command to connect via ssh</Title>
<ArchiveKey1/>
<ArchiveKey2/>
<OH_SubType/>
</HEADER>
<SCRIPT mode="1" state="1">
<MSCRI><![CDATA[: SET &UC4RB_JAVA_CMD# = 'java -jar "&UC4RB_JAR_PATH#"'
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -action &ACTION_NAME#")

!SSH Host
: SET &UC4RB_ESCAPED_STRING# =&UC4RB_SSH_HOST#
: INC PCK.AUTOMIC_SONIC.PUB.INCLUDE.ESCAPE_ARG_VALUE@UNIX
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -sshhost &UC4RB_ESCAPED_STRING#")

!SSH Port
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -sshport &UC4RB_SSH_PORT#")

!Connection Timeout
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -conntimeout &UC4RB_SSH_CONN_TIMEOUT#")

: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -sshtimeout &UC4RB_SSH_TIMEOUT#")

!Sudo
: IF &UC4RB_USE_SSH_SUDO# EQ "Sudo"
:   SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -sudo &UC4RB_USE_SSH_SUDO#")
: ENDIF

! Allocate TTY
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -tty &UC4RB_SSH_TTY#")

: IF &UC4RB_SUDO_SSH_PASSWORD# NE "" OR "--10"
:   SET &UC4RB_ENCRYPTED_PASSWORD_TMP# = "&UC4RB_SUDO_SSH_PASSWORD#"
!   Decrypt passphrase
:   INC PCK.ITPA_SHARED.PRV.INCLUDE.DECRYPT_PASSWORD
    UC4_DECRYPTED_SUDO_PASS=$UC4_DECRYPTED_PWD
    export UC4_DECRYPTED_SUDO_PASS
: ENDIF

!SSH Username
: SET &UC4RB_ESCAPED_STRING# =&UC4RB_SSH_USERNAME#
: INC PCK.AUTOMIC_SONIC.PUB.INCLUDE.ESCAPE_ARG_VALUE@UNIX
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -username &UC4RB_ESCAPED_STRING#")

!Strict host key check
: SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -hostkeycheck &UC4RB_SSH_HOST_KEY_CHECK#")

: IF &UC4RB_SSH_KEY# NE ""
:   SET &UC4RB_ESCAPED_STRING# =&UC4RB_SSH_KEY#
:   INC PCK.AUTOMIC_SONIC.PUB.INCLUDE.ESCAPE_ARG_VALUE@UNIX
:   SET &UC4RB_JAVA_CMD# = STR_CAT(&UC4RB_JAVA_CMD#, " -sshkey &UC4RB_ESCAPED_STRING#")

:   IF &UC4RB_SSH_PASSPHRASE# NE "" OR "--10"
:     SET &UC4RB_ENCRYPTED_PASSWORD_TMP# = "&UC4RB_SSH_PASSPHRASE#"
!     Decrypt passphrase
:     INC PCK.ITPA_SHARED.PRV.INCLUDE.DECRYPT_PASSWORD
      UC4_DECRYPTED_PASSPHRASE=$UC4_DECRYPTED_PWD
      export UC4_DECRYPTED_PASSPHRASE
:   ENDIF
: ELSE
!  Decrypt Password
:  SET &UC4RB_ENCRYPTED_PASSWORD_TMP# = "&UC4RB_SSH_PASSWORD#"
:  INC PCK.ITPA_SHARED.PRV.INCLUDE.DECRYPT_PASSWORD
   export UC4_DECRYPTED_PWD
: ENDIF
]]></MSCRI>
</SCRIPT>
<DOCU_Docu state="1" type="text">
<DOC/>
</DOCU_Docu>
</JOBI>
</uc-export>